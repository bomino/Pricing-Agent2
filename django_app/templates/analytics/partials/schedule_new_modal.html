<!-- New Scheduled Report Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
     id="schedule-new-modal"
     onclick="if(event.target === this) this.remove()">
    <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4">
        <!-- Modal Header -->
        <div class="flex justify-between items-center px-6 py-4 border-b">
            <h3 class="text-lg font-semibold text-gray-900">
                <i class="fas fa-calendar-plus text-blue-600 mr-2"></i>
                Create Scheduled Report
            </h3>
            <button onclick="this.closest('#schedule-new-modal').remove()"
                    class="text-gray-400 hover:text-gray-600">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

        <!-- Modal Body -->
        <form hx-post="/analytics/reports/schedule/new/"
              hx-target="#schedule-new-result"
              hx-swap="innerHTML">
            {% csrf_token %}
            <div class="p-6">
                <!-- Report Name -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Report Name
                    </label>
                    <input type="text" name="name"
                           placeholder="e.g., Weekly Spend Report"
                           class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                </div>

                <!-- Report Type -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Report Type
                    </label>
                    <select name="report_type" required
                            class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="">Select report type...</option>
                        {% for rt in report_types %}
                        <option value="{{ rt.type }}">{{ rt.name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Frequency -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Frequency
                    </label>
                    <select name="frequency" required
                            class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="">Select frequency...</option>
                        {% for freq in frequency_options %}
                        <option value="{{ freq.value }}">{{ freq.label }}</option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Options -->
                <div class="mb-4 space-y-2">
                    <label class="flex items-center gap-2">
                        <input type="checkbox" name="notify_on_complete" checked
                               class="rounded text-blue-600 focus:ring-blue-500">
                        <span class="text-sm text-gray-700">Notify me when report is generated</span>
                    </label>
                    <label class="flex items-center gap-2">
                        <input type="checkbox" name="auto_email"
                               class="rounded text-blue-600 focus:ring-blue-500">
                        <span class="text-sm text-gray-700">Automatically email report to me</span>
                    </label>
                </div>

                <!-- Result -->
                <div id="schedule-new-result"></div>
            </div>

            <!-- Modal Footer -->
            <div class="flex justify-end gap-3 px-6 py-4 border-t bg-gray-50">
                <button type="button"
                        onclick="this.closest('#schedule-new-modal').remove()"
                        class="btn btn-outline">
                    Cancel
                </button>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-calendar-plus mr-2"></i>Create Schedule
                </button>
            </div>
        </form>
    </div>
</div>
